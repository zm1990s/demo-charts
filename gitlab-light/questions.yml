categories:
  - Development
# Global settings, Hostname, images, etc.
questions:
- variable: hostname
  default: "gitlab.corp.local"
  description: "Gitlab hostname"
  type: string
  label: Hostname
  required: true
  group: "Gitlab Settings"
- variable: omnibus_config
  default: "external_url 'http://gitlab.corp.local'"
  description: "Gitlab external-url, full qualified domain"
  label: External URL
  type: string
  required: true
  group: "Gitlab Settings"
- variable: rootpassword
  default: "Admin@123"
  description: "Gitlab root password"
  label: Root Password
  type: string
  required: true
  group: "Gitlab Settings"
- variable: rootemail
  default: "admin@gitlab.com"
  description: "Gitlab root email"
  label: Root E-Mail
  type: string
  required: true
  group: "Gitlab Settings"
- variable: dbpassword
  default: "db@!23456"
  description: "Gitlab Database password"
  label: DB Password
  type: string
  required: true
  group: "Gitlab Settings"
- variable: gitlab.image.repository
  default: "sameersbn/gitlab"
  description: "gitlab docker image name"
  type: string
  label: gitlab Image Name
  group: "Gitlab Settings"
- variable: gitlab.image.tag
  default: "11.8.1"
  description: "gitlab docker image tag"
  type: string
  label: Gitlab Image Tag
  group: "Gitlab Settings"
- variable: postgres.image.repository
  default: "sameersbn/postgresql"
  description: "postgres docker image name"
  type: string
  label: Postgres Image Name
  group: "Gitlab Settings"
- variable: postgres.image.tag
  default: "10"
  description: "postgres docker image tag"
  type: string
  label: Postgres Image Tag
  group: "Gitlab Settings"
- variable: redis.image.repository
  default: "sameersbn/redis"
  description: "Redis docker image name"
  type: string
  label: gitlab Image Name
  group: "Gitlab Settings"
- variable: redis.image.tag
  default: "latest"
  description: "Redis docker image tag"
  type: string
  label: Redis Image Tag
  group: "Gitlab Settings"

# Network settings
- variable: service.nodePort.http
  default: "31080"
  description: "Gitlab http port"
  type: int
  min: 30000
  max: 32767
  label: Gitlab Http Port
  group: "NodePort ettings"
- variable: service.nodePort.https
  default: "31443"
  description: "Gitlab https port"
  type: int
  min: 30000
  max: 32767
  label: Gitlab https port
  group: "NodePort ettings"
- variable: service.nodePort.ssh
  default: "31022"
  description: "Gitlab ssh port"
  type: int
  min: 30000
  max: 32767
  label: Gitlab ssh port
  group: "NodePort settings"

# persistent volume settings
- variable: persistence.enabled
  default: "True"
  description: "Enable persistent volume for Gitlab"
  type: boolean
  required: true
  label: Gitlab Persistent Volume Enabled
  show_subquestion_if: true
  group: "Persistent Volume Settings"
  subquestions:
    - variable: gitlab.storageClass
      default: ""
      description: "BE CAREFUL WITH NFS PV, GITLAB MIGHT FAIL TO START!! If undefined or null, uses the default StorageClass"
      type: storageclass
      label: Default StorageClass for Gitlab
    - variable: gitlab.size
      default: "10Gi"
      description: "Gitlab data Dir Persistent Volume Size"
      type: string
      label: Gitlab Data Dir Volume Size
    - variable: gitlab.existingClaim
      default: ""
      description: "If not empty, uses the specified existing PVC instead of creating new one"
      type: pvc
      label: Existing Persistent Volume Claim for Gitlab Data Dir
      group: "Persistent Volume Settings"
      show_if: "persistence.enabled=true"
    - variable: gitlab.db.size
      default: "5Gi"
      description: "Gitlab Database Persistent Volume Size"
      type: string
      label: Gitlab Database Volume Size
    - variable: gitlab.db.existingClaim
      default: ""
      description: "If not empty, uses the specified existing PVC instead of creating new one"
      type: pvc
      label: Existing Persistent Volume Claim for Gitlab Database
      group: "Persistent Volume Settings"
      show_if: "persistence.enabled=true"
    - variable: gitlab.redis.size
      default: "5Gi"
      description: "Gitlab Redis Persistent Volume Size"
      type: string
      label: Gitlab Redis Volume Size
    - variable: gitlab.redis.existingClaim
      default: ""
      description: "If not empty, uses the specified existing PVC instead of creating new one"
      type: pvc
      label: Existing Persistent Volume Claim for Gitlab Redis
      group: "Persistent Volume Settings"
      show_if: "persistence.enabled=true"
